webpackJsonp([9],{"9zwK":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("0tEf"),i=a("O3w4");let o=a("09cW");var n={props:["msg","orderType"],data:()=>({audioSrc:o,fOpenAudio:!0,fOpenNotice:!1,showMore:!0,popup:{picture:{show:!1,value:""}},msgParams:{pic:"",message:"",orderId:"",minChatId:"",loading:!1,pageSize:20,push:{finished:!1}},msgLists:[],message:{}}),computed:{msgnameS:function(){return(this.msg.otherSide+"").slice(0,1)},user:function(){return JSON.parse(localStorage.getItem("MEMBER"))},usernameS:function(){return(this.user.username+"").slice(0,1)},orderId:function(){return this.$route.query.tradeId}},mounted(){this.init(),this.getChatHistory(),this.createSocketConnect(),this.getClipboardImage()},watch:{processData:"scrollToBottom"},methods:{init:function(){let t=localStorage.getItem("app/order/custom/message");this.message=t?JSON.parse(t):{}},getClipboardImage(){this.$refs.editable.onpaste=(t=>{let s=t.clipboardData.items[0];if("file"===s.kind&&-1!==s.type.indexOf("image/"))return this.sendPicture(s.getAsFile(),"clipboard"),!1})},showPicture(t){this.popup.picture.value=t,this.popup.picture.show=!0},scrollToBottom:function(){setTimeout(()=>{var t=document.getElementById("scrollChat");t.scrollTop=t.scrollHeight},300)},playAudio:function(){var t=document.getElementById("noticeMusic");null!==t&&t.play()},handleNoticeClick:function(){this.fOpenNotice?window.Notification?"default"==Notification.permission?(this.$Message.info("请点击允许进行开启!"),Notification.requestPermission().then(function(t){"denied"==t&&this.$Message.info("您已屏蔽消息提醒，如需开通，请查看帮助!")})):"denied"==Notification.permission?this.$Message.info("您已屏蔽消息提醒，如需开通，请查看帮助!"):this.$Message.info("您已开启桌面消息提醒!"):this.$Message.info("您的浏览器不支持该功能"):this.$Message.info("您已关闭桌面消息提醒!")},handleAudioClick:function(){this.fOpenAudio?this.$Message.info("您已开启声音消息提醒!"):this.$Message.info("您已关闭声音消息提醒!")},createSocketConnect(){let t=this;new Promise((s,a)=>{this.closeSocket();var o=new i(this.host+"/chat/socket/chat-webSocket");this._stompClient=e.over(o),this._stompClient.debug=function(t){},this._stompClient.connect({},a=>{t.$Notice.success({top:50,duration:3,title:"提示",desc:"聊天室连接成功，可以进行聊天了~"}),s()},s=>{t.$Notice.error({top:50,duration:3,title:"提示",desc:"聊天室连接失败，请重试！"}),a()})}).then(s=>{this._stompClient.subscribe("/topic/chatMsg/cd/"+t.msg.myId,function(s){let a=JSON.parse(s.body);if(("custom"!==t.orderType||3==a.uidType)&&a.orderSn==t.msg.orderSn&&a.uidFrom!=t.msg.myId){if(t.msgLists.push(a),t.fOpenNotice&&window.Notification&&"granted"==Notification.permission){var e=new Notification(t.msg.otherSide+"：",{body:a.content,icon:"https://bihuo-ex.oss-ap-southeast-1.aliyuncs.com/FAA55D97ED0370F08273C3A94F765C22.png"});e.onclick=function(){e.close()}}t.fOpenAudio&&t.playAudio(),t.scrollToBottom()}})})},closeSocket(){this._stompClient&&(this._stompClient.disconnect(),this._stompClient=null)},sendSocketMessage:function(t){let s={};s.uidFrom=this.msg.myId,s.nameFrom=this.user.username,s.orderId=this.msg.orderId,s.orderSn=this.msg.orderSn,s.content=t.content,s.type=t.type,"custom"==this.orderType?(s.uidType=4,s.nameTo=this.message.kfName,s.uidTo=this.message.kfId):(s.uidType=6,s.nameTo=this.msg.otherSide,s.uidTo=this.msg.hisId),this.msgLists.push(s),this.scrollToBottom(),this._stompClient.send("/app/message/chat",{},JSON.stringify(s))},sendMessage:function(){this.msgParams.message?(this.sendSocketMessage({content:this.msgParams.message,type:0}),this.msgParams.message=""):this.$Message.info(this.$t("otc.chatline.contentmsg"))},sendPicture:function(t,s="local"){let a=t;"local"===s&&(a=t.target.files[0]);let e=new FormData;e.append("file",a),this.$http.post(this.image.compress,e).then(t=>{let s=t.data;"000"===s.code?this.sendSocketMessage({content:s.data&&s.data.url,type:1}):this.$Message.error("发送图片失败！")}).catch(()=>{this.$Message.error("发送图片失败！")})},getChatHistory:function(t=!1){if(this.msgParams.loading)return this.$Message.info("请稍等，正在获取聊天记录！");this.msgParams.loading=!0,this.msgParams.minChatId=t?this.msgLists[0].chatId:0;let s={minChatId:this.msgParams.minChatId,orderId:this.msg.orderId},a="custom"==this.orderType?"/chat/getHistoryMessageCdToKf.do":"/chat/getHistoryMessageCdToCd.do";this.$http.post(this.host+a,s).then(s=>{this.msgParams.loading=!1;let a=s.body;if("000"===a.code){let s=a.data?a.data.reverse():[];this.msgParams.push.finished=this.msgParams.pageSize>s.length,t?this.msgLists=[...s,...this.msgLists]:(this.msgLists=s,this.scrollToBottom())}else this.$Message.error("获取历史聊天记录失败！")}).catch(t=>{this.msgParams.loading=!1,this.$Message.error("获取历史聊天记录失败！")})},isChatType(t){let s=0,a=String(t.uidFrom),e=localStorage.getItem("app/order/custom/message"),i=e?JSON.parse(e):{};return a==i.memberId&&(s=2),a==i.customerId&&(s=3),a.indexOf("_")>-1&&a.split("_")[0]==i.customerId&&(s=1),a.indexOf("_")>-1&&a.split("_")[0]==i.memberId&&(s=4),s},CurentTime:function(){var t=new Date,s=t.getFullYear(),a=t.getMonth()+1,e=t.getDate(),i=t.getHours(),o=t.getMinutes(),n=s+"-";return a<10&&(n+="0"),n+=a+"-",e<10&&(n+="0"),n+=e+" ",i<10&&(n+="0"),n+=i+":",o<10&&(n+="0"),n+=o}},beforeDestroy(){this.closeSocket()}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Modal",{staticClass:"ivu-modal--preview",attrs:{width:"100%",title:"图片预览"},model:{value:t.popup.picture.show,callback:function(s){t.$set(t.popup.picture,"show",s)},expression:"popup.picture.show"}},[e("img",{staticClass:"is-preview",attrs:{src:t.popup.picture.value,alt:""}})]),t._v(" "),e("div",{staticClass:"chat-line"},[e("div",{staticClass:"scroll-chat",attrs:{id:"scrollChat"}},[e("div",{staticClass:"chat-container-box",attrs:{id:"sysbox"}},[e("div",{staticClass:"system-box"},[e("p",{directives:[{name:"show",rawName:"v-show",value:1==t.msg.status,expression:"msg.status == 1"}],staticClass:"msg-content"},[t._v("\n            "+t._s(t.$t("otc.chatline.status_1"))+"\n          ")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:2==t.msg.status,expression:"msg.status == 2"}],staticClass:"msg-content"},[t._v("\n            "+t._s(t.$t("otc.chatline.status_2"))+"\n          ")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:3==t.msg.status,expression:"msg.status == 3"}],staticClass:"msg-content"},[t._v("\n            "+t._s(t.$t("otc.chatline.status_3"))+"\n          ")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:4==t.msg.status,expression:"msg.status == 4"}],staticClass:"msg-content"},[t._v("\n            "+t._s(t.$t("otc.chatline.status_4"))+"\n          ")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:0==t.msg.status,expression:"msg.status == 0"}],staticClass:"msg-content"},[t._v("\n            "+t._s(t.$t("otc.chatline.status_5"))+"\n          ")])])]),t._v(" "),e("h5",{directives:[{name:"show",rawName:"v-show",value:!t.msgParams.push.finished,expression:"!msgParams.push.finished"}],staticClass:"more"},[e("Icon",{staticClass:"clock",attrs:{type:"ios-clock-outline"}}),t._v(" "),e("span",{on:{click:function(s){t.getChatHistory(!0)}}},[t._v(t._s(t.$t("otc.chatline.loadmore")))])],1),t._v(" "),t._l(t.msgLists,function(s,a){return[e("div",{directives:[{name:"show",rawName:"v-show",value:s.uidFrom!=t.msg.myId,expression:"item.uidFrom != msg.myId"}],key:a,staticClass:"chat-container-box left"},[e("div",{staticClass:"user-chat-box"},[e("div",{staticClass:"user-avatar-box"},[e("div",{staticClass:"avatar-box"},[e("div",{staticClass:"user-face user-avatar-public"},["custom"==t.orderType?[3==s.uidType?[e("span",{staticClass:"user-avatar-in "},[t._v("客服")])]:t._e()]:[e("span",{staticClass:"user-avatar-in "},[t._v(t._s(s.nameFrom&&s.nameFrom.slice(0,1)))])]],2)])]),t._v(" "),e("div",{staticClass:"user-content-box"},[e("p",{staticClass:"user-name"},[t._v(t._s(s.nameFrom))]),t._v(" "),e("div",{staticClass:"chat-info"},[e("div",{staticClass:"user-desc"},[e("p",{staticClass:"icon"}),t._v(" "),0===s.type?e("em",{staticClass:"input-in"},[t._v(t._s(s.content))]):t._e(),t._v(" "),1===s.type?e("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:s.content,alt:""},on:{click:function(a){t.showPicture(s.content)}}}):t._e()]),t._v(" "),e("span",{staticClass:"times"},[t._v(t._s(s.sendTimeStr))])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.uidFrom==t.msg.myId,expression:"item.uidFrom == msg.myId"}],key:a+"index",staticClass:"chat-container-box"},[e("div",{staticClass:"user-chat-box self-chat-box"},[e("div",{staticClass:"user-content-box"},[e("p",{staticClass:"user-name"},[t._v(t._s(t.user.username))]),t._v(" "),e("div",{staticClass:"chat-info"},[e("div",{staticClass:"user-desc self-desc"},[e("p",{staticClass:"icon"}),t._v(" "),0===s.type?e("em",{staticClass:"input-in"},[t._v(t._s(s.content))]):t._e(),t._v(" "),1===s.type?e("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:s.content,alt:""},on:{click:function(a){t.showPicture(s.content)}}}):t._e()])])]),t._v(" "),t._m(0,!0)])])]})],2),t._v(" "),e("h5",{staticClass:"spe_show"},[e("i",{staticClass:"iconfont icon-warning"}),t._v("\n      "+t._s(t.$t("otc.chatline.warning"))+"\n    ")]),t._v(" "),e("div",{staticClass:"audio-wrap"},[e("audio",{attrs:{id:"noticeMusic",src:t.audioSrc}},[t._v("\n        您的浏览器不支持 audio 标签。\n      ")])]),t._v(" "),e("div",{staticClass:"send-msg-box"},[e("div",{staticClass:"app-send"},[e("label",{staticClass:"app-send-label",attrs:{for:"file"}},[e("img",{attrs:{src:a("bSNq"),alt:""}}),t._v(" "),e("input",{staticClass:"app-send-input",staticStyle:{display:"none"},attrs:{title:"上传图片",type:"file",accept:"image/jpg,image/jpeg,image/png",id:"file"},on:{change:t.sendPicture}})])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.msgParams.message,expression:"msgParams.message"}],ref:"editable",staticStyle:{"background-attachment":"scroll","background-size":"16px 18px","background-position":"98% 50%"},attrs:{autocomplete:"off",type:"text",placeholder:t.$t("otc.chatline.contenttip")},domProps:{value:t.msgParams.message},on:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.sendMessage(s):null},input:function(s){s.target.composing||t.$set(t.msgParams,"message",s.target.value)}}}),t._v(" "),e("button",{staticClass:"send-btn",on:{click:t.sendMessage}},[e("Icon",{attrs:{type:"md-paper-plane",size:"28",color:"#f0ac19"}})],1),t._v(" "),e("div",{staticClass:"msg-notice"},[e("Checkbox",{on:{"on-change":t.handleNoticeClick},model:{value:t.fOpenNotice,callback:function(s){t.fOpenNotice=s},expression:"fOpenNotice"}},[t._v("开启桌面消息提醒")]),t._v(" "),e("Checkbox",{on:{"on-change":t.handleAudioClick},model:{value:t.fOpenAudio,callback:function(s){t.fOpenAudio=s},expression:"fOpenAudio"}},[t._v("开启声音消息提醒")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"user-avatar-box"},[s("div",{staticClass:"avatar-box"},[s("div",{staticClass:"user-face user-avatar-public"},[s("span",{staticClass:"user-avatar-in"},[this._v("我")])])])])}]};var l=a("VU/8")(n,r,!1,function(t){a("Kopg")},"data-v-95a822f2",null).exports,c=(a("0tEf"),a("O3w4"),{components:{chatline:l},data:()=>({watching:!1,stompClient:null,reserveTime:"",reserveInteval:null,fundpwd:"",statusBtn:0,tradeType:0,isloading:!0,payTime:"",statusText:"",modal1:!1,modal2:!1,modal3:!1,modal4:!1,modal5:!1,modal6:!1,formItem:{select:"",remark:""},msg:{},realName:"",payInfo:{},bankInfo:{},alipay:{},wechatPay:{},aggregate:{},payCodeUrl:"",payCodeType:0,payPopupMessage:["请用银行卡进行转账","请用手机支付宝扫码","请用手机微信扫码","请用银行卡进行转账"],payCode:{value:"",size:300,backgroundAlpha:1,background:"white",foreground:"black",level:"L"},payStatus:{wx:!1,bank:!1,ali:!1,aggregate:!1},tranfer:{open:!1,number:null,orderSn:"",unit:"",jyPassword:"",otherSide:"",balance:0},params:{orderSn:"",type:"",showBtn:!1}}),mounted(){this.init()},computed:{},methods:{init(){this.params.orderSn=this.$route.query.orderSn,this.params.type=this.$route.query.type,this.setDetailTimer()},getTransferBalance(){this.$http.post(this.host+"/otc/advertise/init").then(t=>{var s=t.body;0===s.code?s.data?this.tranfer.balance=s.data.balance:this.$Message.error("获取用户余额信息失败！"):this.$Message.error(s.message)})},setDetailTimer(){this.clearDetailTimer(),this.getDetail(),this._detailTimer=setInterval(()=>{this.getDetail()},1e4)},clearDetailTimer(){clearInterval(this._detailTimer),this._detailTimer=null},isShowCloseCustomBtn(){let t=localStorage.getItem("app/order/custom/message"),s=t?JSON.parse(t):{};return"custom"===this.params.type&&msg.Id===s.memberId},beforeTranfer:function(){this.tranfer.open=!0,this.tranfer.unit=this.msg.unit,this.tranfer.orderSn=this.msg.orderSn,this.tranfer.otherSide=this.msg.otherSide,this.getTransferBalance()},handlerCustom:function(){this.$Modal.confirm({title:"温馨提示",content:"是否确定申诉订单已处理！",onOk:()=>{this.$http.post(this.host+"/otc/order/closeAppealOrder",{orderId:this.msg.orderId}).then(t=>{0===t.body.code&&(this.$Message.success("申诉订单已处理完成！"),setTimeout(()=>{this.$router.go(-1)},1500))}).catch(()=>{this.$Message.warning("抱歉，申诉订单处理失败！")})}})},handlerTranfer:function(){return this.tranfer.number<=0?this.$Message.warning("请输入合法的数量！"):this.tranfer.jyPassword?void this.$http.post(this.host+"/otc/order/directTransfer",{number:this.tranfer.number,jyPassword:this.tranfer.jyPassword,orderSn:this.tranfer.orderSn}).then(t=>{let s=t.body;0===s.code?(this.tranfer.number=0,this.$Message.success("转账成功！")):this.$Message.warning(s.message)},()=>{this.$Message.warning("抱歉，转账失败！")}):this.$Message.warning("请输入您的资金密码！")},showQRCode:function(t){this.payCodeType=t,1==t?(this.payCode.value=this.alipay.alipayUrl,this.payCode.imageUrl=this.alipay.alipayCodeUrl):2==t?(this.payCode.imageUrl=this.wechatPay.qrWeCodeUrl,this.payCode.value=this.wechatPay.wechatUrl):3==t?this.payCode.value=this.bankInfo.cardNo:4==t?(this.payCode.imageUrl=this.unionpay.unionpayCodeUrl,this.payCode.value=this.unionpay.unionpayUrl):5==t&&(this.payCode.imageUrl=this.aggregate.aggregateCodeUrl,this.payCode.value=this.aggregate.aggregateUrl),this.modal6=!0},beforeAppear:function(){this.$http.post(this.host+"/otc/order/canAppeal",{orderSn:this.$route.query.tradeId}).then(t=>{var s=t.body;0===s.code?this.modal4=!0:this.$Message.error(s.message)})},ok1(){this.$http.post(this.host+"/otc/order/pay",{orderSn:this.$route.query.tradeId}).then(t=>{var s=t.body;0==s.code?(this.$Message.success(s.message),this.getDetail()):this.$Message.error(s.message)})},ok3(){this.$http.post(this.host+"/otc/order/cancel",{orderSn:this.$route.query.tradeId}).then(t=>{var s=t.body;0==s.code?(this.$Message.success(s.message),this.getDetail()):this.$Message.error(s.message)})},ok4(){var t={};t.orderSn=this.$route.query.tradeId,t.remark=this.formItem.remark,this.$http.post(this.host+"/otc/order/appeal",t).then(t=>{var s=t.body;0==s.code?(this.$Message.success(s.message),this.getDetail()):this.$Message.error(s.message)})},ok5(){var t={};t.orderSn=this.$route.query.tradeId,t.jyPassword=this.fundpwd,""!=this.fundpwd?this.$http.post(this.host+"/otc/order/release",t).then(t=>{var s=t.body;0==s.code?(this.$Message.success(s.message),this.getDetail()):this.$Message.error(s.message)}):this.$Message.error(this.$t("otc.chat.msg7tip"))},getDetail(){let t=this.$route.query.tradeId;Boolean(t)&&this.$http.post(this.host+"/otc/order/detail",{orderSn:t}).then(t=>{var s=t.body;if(0==s.code){this.msg=s.data;let t=localStorage.getItem("app/order/custom/message"),a=t?JSON.parse(t):{};if(this.params.showBtn="custom"==this.params.type&&this.msg.myId===a.memberId,this.payInfo=this.msg.payInfo,null==this.payInfo)this.bankInfo=this.alipay=null==this.wechatPay;else{this.bankInfo=this.msg.payInfo.bankInfo;let t=this.msg.payMode&&this.msg.payMode.split(",");this.realName=this.msg.payInfo.realName;let s=this.payInfo.alipay;t.indexOf("支付宝")>-1?(this.payStatus.ali=!0,this.alipay=s||{}):this.payStatus.ali=!1;let a=this.payInfo.wechatPay;t.indexOf("微信")>-1?(this.payStatus.wx=!0,this.wechatPay=a||{}):this.payStatus.wx=!1;let e=this.payInfo.aggregate;t.indexOf("聚合码")>-1?(this.payStatus.aggregate=!0,this.aggregate=e||{}):this.payStatus.aggregate=!1;let i=this.payInfo.bankInfo;t.indexOf("银联")>-1?(this.payStatus.bank=!0,this.bankInfo=i||{}):this.payStatus.bank=!1;let o=this.payInfo.unionpay;t.indexOf("云闪付")>-1?(this.payStatus.unionpay=!0,this.unionpay=o||{}):this.payStatus.unionpay=!1}this.statusBtn=s.data.status,this.tradeType=s.data.type,this.statusText=this.setOrderStatus(this.statusBtn),1==s.data.status?this.setBackTimer():this.clearBackTimer()}else this.$Message.error(s.message)})},setBackTimer(){this.clearBackTimer();let t=+new Date(this.msg.createTime),s=+new Date(this.msg.currentTime),a=60*Number(this.msg.timeLimit)*1e3;this.reserveTime=this.getBackTime(t,s,a),this._backTimer=setInterval(()=>{s+=1e3,this.reserveTime=this.getBackTime(t,s,a)},1e3)},clearBackTimer(){clearInterval(this._backTimer),this._backTimer=null},getBackTime(t,s,a){let e=a-(s-t);if(e<=0)return"";function i(t){return Number(t)>9?t:"0"+t}return function(t){let s=Math.floor(t/36e5),a=Math.floor((t-36e5*s)/6e4),e=Math.floor((t-36e5*s-6e4*a)/1e3);return s>0?`${s}时${i(a)}分${i(e)}秒`:a>0?`${i(a)}分${i(e)}秒`:e>0?`${i(e)}秒`:0}(e)},setOrderStatus:function(t){let s=[{status:0,text:"已取消"},{status:1,text:"等待付款"},{status:2,text:"等待放行"},{status:3,text:"已完成"},{status:4,text:"申诉中"}].find(s=>s.status===t);return!!s&&s.text}},beforeDestroy(){this.clearDetailTimer(),this.clearBackTimer()}}),d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content-wrap"},[a("input",{attrs:{type:"password",hidden:""}}),t._v(" "),a("div",{staticClass:"container chat-in-box",attrs:{id:"List"}},[a("p",{staticStyle:{padding:"10px 0 10px 20px","font-size":"16px"}},[a("span",{staticStyle:{color:"#f0a70a",cursor:"pointer"},on:{click:function(s){t.$router.go(-1)}}},[t._v(t._s(t.$t("otc.myorder")))]),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v(" > 订单详情")])]),t._v(" "),a("Row",{staticClass:"chat-in"},[a("Col",{attrs:{span:"4"}},[a("div",{staticClass:"leftmenu left-box chat-right vui-padding--large"},[a("div",{staticClass:"chat-right-in"},[0==t.tradeType?a("div",[a("div",{staticClass:"vui-margin-bottom vui-text-align--center"},[a("span",{staticClass:"vui-color--danger vui-font-weight--bold"},[t._v("温馨提示")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("1.")]),t._v(" "),a("span",[t._v("\n                  请在规定的时限内按照对方给出的账号完成支付，并在本页面点击“\n                ")]),t._v(" "),a("span",{staticClass:"vui-color--danger"},[t._v("\n                  付款完成\n                ")]),t._v(" "),a("span",[t._v("\n                  ”。转账时请在留言中备注好交易单号\n                ")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  2.卖方收到款项后会在网站确认收款，系统会自动将您所购买的数字资产发放至您的账户，请注意查收\n                ")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  3.请不要使用其他聊天软件与对方沟通，更不要接受对方向您发送的任何文件、邮箱附件等，所有沟通环节请都在本页面的聊天窗口完成\n                ")])])]):a("div",[a("div",{staticClass:"vui-margin-bottom vui-text-align--center"},[a("span",{staticClass:"vui-color--danger  vui-font-weight--bold"},[t._v("温馨提示")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  1.\n                ")]),t._v(" "),a("span",[t._v("\n                  您所出售的数字资产，已交由平台托管冻结。请在确定收到对方付款后，点击“\n                ")]),t._v(" "),a("span",{staticClass:"vui-color--danger"},[t._v("确认放行")]),t._v(" "),a("span",[t._v("\n                  支付数字资产\n                ")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  2.请不要相信任何催促放币的理由，确认收到款项后再释放数字资产，避免造成损失！\n                ")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  3.在收到账短信后，请务必登录网上银行或手机银行确认款项是否入账，避免因收到诈骗短信错误释放数字资产！\n                ")])]),t._v(" "),a("div",{staticClass:"vui-margin-bottom",staticStyle:{"text-indent":"20px"}},[a("span",[t._v("\n                  4.请不要使用其他聊天软件与对方沟通，更不要接受对方向您发送的任何文件、邮箱附件等，所有沟通环节请都在本页面的聊天窗口完成\n                ")])])]),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),a("div",{staticClass:"bottom-btn"},[a("div",{staticStyle:{"padding-top":"20px"}},[a("h6",{staticStyle:{"font-weight":"600"}},[t._v("\n                  订单状态:\n                  "),a("span",[t._v(t._s(t.statusText))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.statusBtn&&0==t.tradeType,expression:"statusBtn == 1 && tradeType == 0"}]},[a("Button",{attrs:{type:"warning"},on:{click:function(s){t.modal1=!0}}},[t._v("付款完成\n                  ")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:function(s){t.modal3=!0}}},[t._v("取消交易\n                  ")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.statusBtn&&0==t.tradeType,expression:"statusBtn == 2 && tradeType == 0"}]},[a("Button",{attrs:{type:"warning"},on:{click:t.beforeAppear}},[t._v("订单申诉\n                  ")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:function(s){t.modal3=!0}}},[t._v("取消交易\n                  ")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.statusBtn&&1==t.tradeType,expression:"statusBtn == 2 && tradeType == 1"}]},[a("Button",{attrs:{type:"warning"},on:{click:function(s){t.modal5=!0}}},[t._v("\n                    确认放行\n                  ")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:t.beforeAppear}},[t._v("订单申诉")])],1)]),t._v(" "),a("div",{staticStyle:{"padding-top":"20px"}},[a("div",[a("Button",{attrs:{type:"warning"},on:{click:t.beforeTranfer}},[t._v("直接转账\n                  ")])],1)]),t._v(" "),t.params.showBtn?a("div",{staticStyle:{"padding-top":"20px"}},[a("div",[a("Button",{attrs:{type:"error"},on:{click:t.handlerCustom}},[t._v("关闭申诉\n                  ")])],1)]):t._e()])])])]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("div",{staticClass:"vui-padding--large vui-margin-left",staticStyle:{"background-color":"#141e2b"}},[a("Row",[a("i-col",{attrs:{span:"6"}},[a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("订单号：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.orderSn))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("渠道编号：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.channelOrderId))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("渠道用户编号：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.subMemId))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("状态：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("h5",[t._v(t._s(t.statusText))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.statusBtn,expression:"statusBtn == 1"}],staticClass:"reserve-time"},[t._v("\n                        "+t._s(t.reserveTime)+"\n                      ")])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("创建时间：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.createTime))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("交易对象：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.otherSide))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("交易价格：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.price)+" CNY")])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("交易数量：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.amount)+" "+t._s(t.msg.unit))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("交易金额：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.money)+" CNY")])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("手续费：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.commission))])])])],1)],1),t._v(" "),a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("交易方式：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.payMode))])])])],1)],1),t._v(" "),t.aggregate.aggregateMode?a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("收款方式：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v("\n                        "+t._s(t.aggregate.aggregateMode)+"\n                      ")])])])],1)],1):t._e(),t._v(" "),t.msg.payRemark?a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("备注：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.payRemark))])])])],1)],1):t._e(),t._v(" "),t.msg.transferNumber?a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("转账金额：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.transferNumber))])])])],1)],1):t._e(),t._v(" "),t.msg.transferTime?a("div",{staticClass:"vui-margin-bottom--large"},[a("Row",[a("i-col",{attrs:{span:"8"}},[a("div",{staticClass:"vui-text-align--right"},[a("span",{},[t._v("转账时间：")])])]),t._v(" "),a("i-col",{attrs:{span:"16"}},[a("div",{staticClass:"vui-padding-left vui-text-align--left"},[a("span",{staticClass:"vui-font-weight--bold"},[t._v(t._s(t.msg.transferTime))])])])],1)],1):t._e()]),t._v(" "),a("i-col",{attrs:{span:"18"}},[a("div",[a("Row",{staticClass:"vui-padding--large",attrs:{type:"flex",justify:"center"}},[t.payStatus.bank?a("i-col",{staticClass:"order-info",attrs:{span:"6"}},[a("i",{staticClass:"icons bankfor"}),t._v(" "),a("span",[t._v(t._s(null!=t.bankInfo?t.bankInfo.bankRealName:"")+"\n                    ")]),t._v(" "),a("p",{staticStyle:{"line-height":"30px"}},[t._v("\n                      "+t._s(t.bankInfo&&t.bankInfo.cardNo)+"\n                    ")]),t._v(" "),t.bankInfo&&null!=t.bankInfo&&null!=t.bankInfo.cardNo&&""!=t.bankInfo.cardNo?a("p",[a("a",{on:{click:function(s){t.showQRCode(3)}}},[t._v("银行卡")])]):t._e()]):t._e(),t._v(" "),t.payStatus.ali?a("i-col",{staticClass:"order-info",attrs:{span:"6"}},[a("i",{staticClass:"icons alipay"}),t._v(" "),a("span",[t._v(t._s(t.$t("otc.chat.zfb")))]),t._v(" "),a("p",{staticStyle:{"line-height":"30px"}},[t._v("\n                      "+t._s(t.alipay&&t.alipay.alipayRealName)+"\n                    ")]),t._v(" "),a("p",[a("a",{on:{click:function(s){t.showQRCode(1)}}},[t._v("二维码")])])]):t._e(),t._v(" "),t.payStatus.wx?a("i-col",{staticClass:"order-info",attrs:{span:"6"}},[a("i",{staticClass:"icons wechat"}),t._v(" "),a("span",[t._v(t._s(t.$t("otc.chat.wx")))]),t._v(" "),a("p",{staticStyle:{"line-height":"30px"}},[t._v("\n                      "+t._s(t.wechatPay&&t.wechatPay.wechat)+"\n                    ")]),t._v(" "),a("p",[a("a",{on:{click:function(s){t.showQRCode(2)}}},[t._v("二维码")])])]):t._e(),t._v(" "),t.payStatus.unionpay?a("i-col",{staticClass:"order-info",attrs:{span:"6"}},[a("i",{staticClass:"icons unionpay"}),t._v(" "),a("span",[t._v("云闪付")]),t._v(" "),a("p",{staticStyle:{"line-height":"30px"}},[t._v("\n                      "+t._s(t.unionpay&&t.unionpay.unionpay)+"\n                    ")]),t._v(" "),a("p",[a("a",{on:{click:function(s){t.showQRCode(4)}}},[t._v("二维码")])])]):t._e(),t._v(" "),t.payStatus.aggregate?a("i-col",{staticClass:"order-info",attrs:{span:"6"}},[a("i",{staticClass:"icons polymer"}),t._v(" "),a("span",[t._v("聚合码")]),t._v(" "),a("p",{staticStyle:{"line-height":"30px"}},[t._v("\n                      "+t._s(t.aggregate&&t.aggregate.aggregate)+"\n                    ")]),t._v(" "),a("p",[a("a",{on:{click:function(s){t.showQRCode(5)}}},[t._v("二维码")])])]):t._e()],1)],1),t._v(" "),this.msg.orderId?a("chatline",{attrs:{msg:t.msg,orderType:t.params.type}}):t._e()],1)],1)],1)])],1)],1),t._v(" "),a("Modal",{staticClass:"ivu-modal--left",attrs:{title:t.$t("otc.chat.tip"),"mask-closable":!1,width:"400px"},on:{"on-ok":t.ok1},model:{value:t.modal1,callback:function(s){t.modal1=s},expression:"modal1"}},[a("p",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(t.$t("otc.chat.msg1")))])]),t._v(" "),a("Modal",{attrs:{title:t.$t("otc.chat.tip"),"mask-closable":!1},on:{"on-ok":t.ok3},model:{value:t.modal3,callback:function(s){t.modal3=s},expression:"modal3"}},[a("p",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(t.$t("otc.chat.msg3")))])]),t._v(" "),a("Modal",{staticClass:"ivu-modal--left",attrs:{title:t.$t("otc.chat.tip"),"mask-closable":!1,width:"400px"},on:{"on-ok":t.ok4},model:{value:t.modal4,callback:function(s){t.modal4=s},expression:"modal4"}},[a("Form",{attrs:{model:t.formItem,"label-width":80}},[a("FormItem",{attrs:{label:t.$t("otc.chat.comptype")}},[a("Select",{model:{value:t.formItem.select,callback:function(s){t.$set(t.formItem,"select",s)},expression:"formItem.select"}},[a("Option",{attrs:{value:"1"}},[t._v(t._s(t.$t("otc.chat.msg4")))]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v(t._s(t.$t("otc.chat.msg5")))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("otc.chat.compremark")}},[a("Input",{attrs:{type:"textarea",autocomplete:"off",autosize:{minRows:2,maxRows:5},placeholder:t.$t("otc.chat.willcomp")},model:{value:t.formItem.remark,callback:function(s){t.$set(t.formItem,"remark",s)},expression:"formItem.remark"}})],1)],1)],1),t._v(" "),a("Modal",{staticClass:"ivu-modal--left",attrs:{title:t.$t("otc.chat.tip"),"mask-closable":!1,width:"400px"},on:{"on-ok":t.ok5},model:{value:t.modal5,callback:function(s){t.modal5=s},expression:"modal5"}},[a("P",{staticStyle:{color:"red","font-weight":"bold"}},[t._v("\n      "+t._s(t.$t("otc.chat.msg6"))),a("br"),t._v(" "),a("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",placeholder:t.$t("otc.chat.msg7"),autocomplete:"off"},model:{value:t.fundpwd,callback:function(s){t.fundpwd=s},expression:"fundpwd"}}),t._v(" "),a("Input",{attrs:{type:"password",placeholder:t.$t("otc.chat.msg7"),autocomplete:"off"},model:{value:t.fundpwd,callback:function(s){t.fundpwd=s},expression:"fundpwd"}})],1)],1),t._v(" "),a("Modal",{staticClass:"ivu-modal--left",attrs:{title:"转账给"+t.tranfer.otherSide,"mask-closable":!1,width:"400px"},on:{"on-ok":t.handlerTranfer},model:{value:t.tranfer.open,callback:function(s){t.$set(t.tranfer,"open",s)},expression:"tranfer.open"}},[a("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password",placeholder:t.$t("otc.chat.msg7"),autocomplete:"off"},model:{value:t.fundpwd,callback:function(s){t.fundpwd=s},expression:"fundpwd"}}),t._v(" "),a("div",{staticClass:"vui-margin-bottom"},[a("span",{staticStyle:{color:"#999"}},[t._v("当前可用余额 ："),a("span",{staticStyle:{color:"#f0ac19"}},[t._v(t._s(t.tranfer.balance))])])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px",display:"flex"}},[a("div",{staticClass:"vp-number--block ",staticStyle:{flex:"1"}},[a("Input-number",{attrs:{min:0,placeholder:"请输入要转账的"+t.tranfer.unit+"数量"},model:{value:t.tranfer.number,callback:function(s){t.$set(t.tranfer,"number",s)},expression:"tranfer.number"}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"line-height":"32px","margin-left":"10px"}},[t._v(t._s(t.tranfer.unit))])])]),t._v(" "),a("div",[a("Input",{attrs:{type:"password",placeholder:"请输入资金密码",autocomplete:"off"},model:{value:t.tranfer.jyPassword,callback:function(s){t.$set(t.tranfer,"jyPassword",s)},expression:"tranfer.jyPassword"}})],1)],1),t._v(" "),a("Modal",{staticClass:"ivu-modal--left",attrs:{width:"400px"},model:{value:t.modal6,callback:function(s){t.modal6=s},expression:"modal6"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.payPopupMessage[t.payCodeType]))])]),t._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[3==t.payCodeType?a("div",{staticClass:"text-align:center;"},[a("div",{staticStyle:{color:"white","font-size":"24px","margin-bottom":"10px"}},[t._v("\n          "+t._s(t.bankInfo.bankRealName)+"\n        ")]),t._v(" "),a("div",{staticStyle:{color:"white","font-size":"24px","margin-bottom":"10px"}},[t._v("\n          "+t._s(t.bankInfo.bank)+"\n        ")]),t._v(" "),a("div",{staticStyle:{color:"white","font-size":"36px","margin-bottom":"10px"}},[t._v("\n          "+t._s(t.payCode.value)+"\n        ")])]):a("div",[t.payCode.value?a("div",{staticStyle:{position:"relative"}},[a("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)","background-color":"white"}},[a("i",{staticClass:"icons ",class:{"alipay-plus":1==t.payCodeType,"wechat-plus":2==t.payCodeType,"unionpay-plus":4==t.payCodeType,"polymer-plus":5==t.payCodeType},staticStyle:{height:"50px",width:"50px"}})]),t._v(" "),a("qriously",{attrs:{value:t.payCode.value,size:t.payCode.size,level:t.payCode.level,background:t.payCode.background,foreground:t.payCode.foreground,backgroundAlpha:t.payCode.backgroundAlpha}})],1):a("div",[a("img",{staticStyle:{"max-height":"300px"},attrs:{src:t.payCode.imageUrl,alt:""}})])])]),t._v(" "),1==t.payCodeType&&t.alipay.alipayRealName?a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"16px","font-weight":"800",color:"#fff"}},[t._v(t._s(t.alipay.alipayRealName))])]):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(t){a("jDsx"),a("Zvx6")},"data-v-369d742e",null);s.default=p.exports},Kopg:function(t,s){},Zvx6:function(t,s){},jDsx:function(t,s){}});