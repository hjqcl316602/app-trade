webpackJsonp([19],{C3aS:function(t,e){},"KD/C":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("d5Yy"),a=r("PJh5"),i={components:{expandRow:o.a},data(){const t=this;return{loading:!1,pageSize:10,pageNo:1,total:10,symbol:[],formItem:{symbol:"",type:"",direction:"",date:""},columns:[{type:"expand",width:30,render:(t,e)=>t(o.a,{props:{skin:e.row.skin,rows:e.row.detail}})},{title:this.$t("exchange.time"),key:"time",minWidth:55,render:(t,e)=>t("span",{},this.dateFormat(e.row.time))},{title:"交易对",key:"symbol"},{title:"类型",width:60,render:(t,e)=>t("span","LIMIT_PRICE"===e.row.type?"限价":"市价")},{title:this.$t("exchange.direction"),key:"direction",width:60,render:(t,e)=>{const r=e.row;return t("span",{attrs:{class:r.direction.toLowerCase()}},"BUY"==r.direction?this.$t("exchange.buyin"):this.$t("exchange.sellout"))}},{title:this.$t("exchange.price"),key:"price",render:(e,r)=>e("span",{attrs:{title:r.row.price}},t.toFloor(r.row.price))},{title:this.$t("exchange.num"),key:"amount",render:(e,r)=>e("span",{attrs:{title:r.row.amount}},t.toFloor(r.row.amount))},{title:this.$t("exchange.traded"),key:"tradedAmount",render:(e,r)=>e("span",{attrs:{title:r.row.tradedAmount}},t.toFloor(r.row.tradedAmount))},{title:"成交金额",key:"turnover",render:(e,r)=>e("span",{attrs:{title:r.row.turnover}},t.toFloor(r.row.turnover))},{title:this.$t("exchange.action"),key:"operate",width:110,render:(t,e)=>t("Button",{props:{size:"small"},style:{border:"1px solid #f0ac19",color:"#f1ac19","line-height":"1.2","border-radius":"10px"},on:{click:()=>{this.cancel(e.row.orderId)}}},this.$t("exchange.undo"))}],orders:[]}},created(){this.getHistoryOrder(),this.getSymbol()},methods:{dateFormat:function(t){return a(t).format("YYYY-MM-DD HH:mm:ss")},timeFormat:function(t){return a(t).format("HH:mm:ss")},loadDataPage(t){this.pageNo=t,this.getHistoryOrder()},handleSubmit(){this.pageNo=1,this.getHistoryOrder()},handleClear(){this.formItem={symbol:"",type:"",direction:"",date:""}},getHistoryOrder(){this.loading=!0;const{symbol:t,type:e,direction:r,date:o}=this.formItem,a=new Date(o[0]).getTime()||"",i=new Date(o[1]).getTime()||"";let s={};t&&(s.symbol=t),r&&(s.direction=r),e&&(s.type=e),a&&(s.startTime=a),i&&(s.endTime=i),s.pageNo=this.pageNo,s.pageSize=this.pageSize;var n=this;this.orders=[],this.$http.post(this.host+"/exchange/order/personal/current",s).then(t=>{var e=t.body;let r=[];if(e.content.length>0){this.total=e.totalElements;for(var o=0;o<e.content.length;o++){var a=e.content[o];a.price="MARKET_PRICE"==a.type?n.$t("exchange.marketprice"):a.price,r.push(a)}this.orders=r}this.loading=!1})},getSymbol(){this.$http.post(this.host+this.api.market.thumb,{}).then(t=>{var e=t.body;e.length>0&&(this.symbol=e)})},cancel(t){this.$Modal.confirm({content:this.$t("exchange.undotip"),onOk:()=>{this.$http.post(this.host+this.api.exchange.orderCancel+"/"+t,{}).then(t=>{var e=t.body;0==e.code?this.getHistoryOrder():this.$Notice.error({title:this.$t("exchange.tip"),desc:e.message})})}})}}},s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"entrustcurrent"},[r("Form",{staticClass:"form",attrs:{model:t.formItem,"label-width":65,inline:""}},[r("FormItem",{attrs:{label:"起止时间:"}},[r("DatePicker",{staticStyle:{width:"180px"},attrs:{type:"daterange"},model:{value:t.formItem.date,callback:function(e){t.$set(t.formItem,"date",e)},expression:"formItem.date"}})],1),t._v(" "),r("FormItem",{attrs:{label:"交易对:"}},[r("Select",{staticStyle:{width:"100px"},model:{value:t.formItem.symbol,callback:function(e){t.$set(t.formItem,"symbol",e)},expression:"formItem.symbol"}},t._l(t.symbol,function(e,o){return r("Option",{key:o,attrs:{value:e.symbol}},[t._v(t._s(e.symbol))])}))],1),t._v(" "),r("FormItem",{attrs:{label:"类型: "}},[r("Select",{staticStyle:{width:"70px"},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[r("Option",{attrs:{value:"LIMIT_PRICE"}},[t._v("限价")]),t._v(" "),r("Option",{attrs:{value:"MARKET_PRICE"}},[t._v("市价")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"方向: "}},[r("Select",{staticStyle:{width:"70px"},model:{value:t.formItem.direction,callback:function(e){t.$set(t.formItem,"direction",e)},expression:"formItem.direction"}},[r("Option",{attrs:{value:"0"}},[t._v("买入")]),t._v(" "),r("Option",{attrs:{value:"1"}},[t._v("卖出")])],1)],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"warning"},on:{click:t.handleSubmit}},[t._v("搜索")]),t._v(" "),r("Button",{staticClass:"clear_btn",staticStyle:{"margin-left":"8px"},on:{click:t.handleClear}},[t._v("清空条件")])],1)],1),t._v(" "),r("div",{staticClass:"table"},[r("Table",{attrs:{columns:t.columns,data:t.orders,loading:t.loading}}),t._v(" "),r("div",{staticClass:"page"},[r("Page",{attrs:{total:t.total,pageSize:t.pageSize,current:t.pageNo},on:{"on-change":t.loadDataPage}})],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")(i,s,!1,function(t){r("jKY3"),r("C3aS")},"data-v-2d13a03e",null);e.default=n.exports},jKY3:function(t,e){}});