webpackJsonp([13],{CGn2:function(t,i){},YZT6:function(t,i){},jDKi:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("ieju");s.d.find(t=>"number-money"===t.type).value;var a={components:{},data(){let t=this;return{edit:{popup:!1,type:"insert",id:"",advertiseType:"1",number:"",payMode:"",maxLimit:"",payModeList:[],password:"",base:{limit:0,balance:0,leftBuyLimit:0,leftSellLimit:0}},loginmsg:this.$t("common.logintip"),dataCount:0,tableAdv:[],loading:!0,tableColumnsAdv:[{title:t.$t("otc.myad.no"),key:"id",width:55,align:"center"},{title:t.$t("otc.myad.type"),key:"advertiseType",width:90,align:"center",render:(i,e)=>{let s="";return 0==e.row.advertiseType?s=t.$t("otc.myad.buy"):1==e.row.advertiseType&&(s=t.$t("otc.myad.sell")),i("div",[i("p",s)])}},{title:t.$t("otc.myad.limit"),key:"limit",width:100,align:"center",render:(t,i)=>t("div",[t("p",i.row.minLimit+"~"+i.row.maxLimit)])},{title:t.$t("otc.myad.remain"),key:"remainAmount",width:90,align:"center"},{title:t.$t("otc.myad.coin"),key:"coinUnit",width:100,align:"center"},{title:"支付/收款方式",key:"payMode",width:100,align:"center"},{title:t.$t("otc.myad.created"),key:"createTime",width:160,align:"center"},{title:t.$t("otc.myad.operate"),key:"buyBtn",width:180,align:"center",render:function(i,e){return i("p",[i("a",{on:{click:function(){0==e.row.status?t.$Message.error(t.$t("otc.myad.errmsg")):t.beforePublish("update",e.row)}}},[i("Button",{props:{size:"small"},style:{marginRight:"8px"}},t.$t("otc.myad.update"))]),i("Button",{props:{type:"primary",size:"small"},style:{marginRight:"8px"},on:{click:()=>{if(1==e.row.status){let i={};i.id=e.row.id,t.$http.post(t.host+"/otc/advertise/on/shelves",i).then(i=>{var e=i.body;0==e.code?(t.$Message.success(e.message),t.init()):t.$Message.error(e.message)})}else if(0==e.row.status){let i={};i.id=e.row.id,t.$http.post(t.host+"/otc/advertise/off/shelves",i).then(i=>{var e=i.body;0==e.code?(t.$Message.success(e.message),t.init()):t.$Message.error(e.message)})}}}},0==e.row.status?t.$t("otc.myad.dropoff"):t.$t("otc.myad.shelf")),i("Button",{props:{type:"error",size:"small"},on:{click:()=>{let i={};i.id=e.row.id,1==e.row.status?t.$Modal.confirm({title:t.$t("common.tip"),content:"<p>"+t.$t("common.delete")+"</p>",onOk:()=>{t.$http.post(t.host+"/otc/advertise/delete",i).then(i=>{var e=i.body;0==e.code?(t.$Message.success(e.message),t.init()):t.$Message.error(e.message)})}}):t.$Message.error("下架广告后才可以删除！")}}},t.$t("otc.myad.delete"))])}}],totalPage:0,pageNumber:10,currentPage:1}},methods:{init(){this.currentPage=1,this.getAd()},sureSave(){let t=new s.a;if(t.set(this.edit.payMode,!0,"请选择收款方式").set(this.edit.number+"",!0,"请输入交易数量").set(this.edit.password,!0,"请输入资金密码"),t.pass){let t={number:this.edit.number,pay:[this.edit.payMode],jyPassword:this.edit.password,maxLimit:this.edit.maxLimit,advertiseType:this.edit.advertiseType};"insert"==this.edit.type?this.$http.post(this.host+"/otc/advertise/createStable",t).then(t=>{var i=t.body;0==i.code?(this.$Message.success(i.message),this.edit.popup=!1,this.edit.number="",this.edit.payMode="",this.edit.maxLimit="",this.init()):this.$Message.error(i.message)}):(t.id=this.edit.id,this.$http.post(this.host+"/otc/advertise/updateStable",t).then(t=>{var i=t.body;0==i.code?(this.$Message.success(i.message),this.edit.popup=!1,this.edit.number="",this.edit.payMode="",this.edit.maxLimit="",this.init()):this.$Message.error(i.message)}))}else this.$Message.error(t.message)},beforePublish(t,i){this.edit.type=t,"update"===t&&(this.edit.number=i.number,this.edit.maxLimit=i.maxLimit,this.edit.payMode=(i.payMode+"").split(",")[0],this.edit.advertiseType=i.advertiseType+"",this.edit.id=i.id+""),this.edit.popup=!0,this.getMember(),this.getAccount(),this.getBaseMessage()},getMember(){this.$http.get(this.host+this.api.uc.identification).then(t=>{2==t.body.data.certifiedBusinessStatus||(this.$Message.warning("请先申请商家认证!"),this.$router.push("/identbusiness"))})},getBaseMessage(){this.$http.post(this.host+"/otc/advertise/init").then(t=>{var i=t.body;0===i.code?i.data?this.edit.base=Object.assign(this.edit.base,i.data):this.$Message.error("获取用户剩余额度等信息失败！"):this.$Message.error(i.message)})},getAccount(){this.$http.post(this.host+"/uc/approve/account/setting").then(t=>{var i=t.body;if(0==i.code){this.edit.payModeList=[];let t=(i.data||[]).filter(t=>1===t.checked);t.findIndex(t=>1===t.type)>-1&&this.edit.payModeList.push({label:"银联",value:"银联"}),t.findIndex(t=>2===t.type)>-1&&this.edit.payModeList.push({label:"微信",value:"微信"}),t.findIndex(t=>3===t.type)>-1&&this.edit.payModeList.push({label:"支付宝",value:"支付宝"}),t.findIndex(t=>4===t.type)>-1&&this.edit.payModeList.push({label:"云闪付",value:"云闪付"}),t.findIndex(t=>5===t.type)>-1&&this.edit.payModeList.push({label:"聚合码",value:"聚合码"}),t.findIndex(t=>6===t.type)>-1&&this.edit.payModeList.push({label:"动态码",value:"动态码"})}else this.$Message.error(i.message)})},updateLangData(){this.tableColumnsAdv[0].title=this.$t("otc.myad.no"),this.tableColumnsAdv[1].title=this.$t("otc.myad.type"),this.tableColumnsAdv[2].title=this.$t("otc.myad.limit"),this.tableColumnsAdv[3].title=this.$t("otc.myad.remain"),this.tableColumnsAdv[4].title=this.$t("otc.myad.coin"),this.tableColumnsAdv[5].title=this.$t("otc.myad.created"),this.tableColumnsAdv[6].title=this.$t("otc.myad.operate")},remove(t){this.tableAdv.splice(t,1)},banding(){this.$router.push("/uc/account")},changePage(t){this.currentPage=t,this.getAd()},getAd(){this.$http.post(this.host+"/otc/advertise/all",{pageNo:this.currentPage,pageSize:this.pageNumber}).then(t=>{var i=t.body;if(0===i.code){this.tableAdv=i.data.content;for(var e=0;e<this.tableAdv.length;e++)this.tableAdv[e].coinUnit=this.tableAdv[e].coin.unit;this.loading=!1,this.totalPage=i.data.totalElements}else this.$Message.error(this.loginmsg)})},publish(t){"coin"==t?this.$router.push(this.api.otc.createCoin):this.$router.push(this.api.otc.createAd)}},computed:{lang:function(){return this.$store.state.lang}},watch:{lang:function(){this.updateLangData()}},created(){this.init()}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"nav-rights"},[e("Modal",{staticClass:"ivu-modal--left",attrs:{"mask-closable":!1,width:"400px",title:"insert"===t.edit.type?"发布广告":"修改广告"},model:{value:t.edit.popup,callback:function(i){t.$set(t.edit,"popup",i)},expression:"edit.popup"}},[e("div",{staticClass:"vui-padding--large"},[e("div",[e("div",{staticClass:"vui-row--flex vui-align-items--flex-start vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--label"},[t._v("温馨提示")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("div",{staticClass:"vui-margin-bottom"},[e("span",{staticClass:"vui-color--danger"},[t._v("\n                承兑额度=出售或购买的上限\n              ")])]),t._v(" "),e("div",{staticClass:"vui-margin-bottom"},[e("span",{staticClass:"vui-color--danger"},[t._v("\n                承兑额度增加=用其他数字货币兑换TTM会增加TTM数量的额度\n              ")])]),t._v(" "),e("div",{staticClass:"vui-margin-bottom"},[e("span",{staticClass:"vui-color--danger"},[t._v("\n                承兑额度的减少=用TTM兑换其他数字货币会减少TTM数量的额度\n              ")])]),t._v(" "),t._e()])]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--label"},[t._v("承兑额度")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("span",{staticClass:"vui-color--primary"},[t._v(t._s(t.edit.base.limit))])])]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--label"},[t._v("余额")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("span",{staticClass:"vui-color--primary"},[t._v(t._s(t.edit.base.balance))])])]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--danger"},[t._v("*")]),e("span",{staticClass:"vui-color--label"},[t._v("我想要")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("RadioGroup",{model:{value:t.edit.advertiseType,callback:function(i){t.$set(t.edit,"advertiseType",i)},expression:"edit.advertiseType"}},[e("Radio",{attrs:{label:"1",disabled:"update"===t.edit.type}},[t._v("在线出售")]),t._v(" "),e("Radio",{attrs:{label:"0",disabled:"update"===t.edit.type}},[t._v("在线购买")])],1)],1)]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--danger"},[t._v("*")]),t._v(" "),e("span",{staticClass:"vui-color--label"},[t._v("付款方式")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("div",{staticClass:"vui-flex vui-align-items--center"},[e("div",{staticClass:"vui-flex--1"},[e("Select",{model:{value:t.edit.payMode,callback:function(i){t.$set(t.edit,"payMode",i)},expression:"edit.payMode"}},t._l(t.edit.payModeList,function(i){return e("Option",{key:i.value,attrs:{value:i.value}},[t._v(t._s(i.label))])}))],1),t._v(" "),e("div",{staticClass:"vui-margin-left"},[e("i-button",{on:{click:t.banding}},[t._v("绑定")])],1)])])]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--danger"},[t._v("*")]),e("span",{staticClass:"vui-color--label"},[t._v("交易数量")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("div",[e("i-input",{attrs:{placeholder:"请输入您的交易数量",autocomplete:"off"},model:{value:t.edit.number,callback:function(i){t.$set(t.edit,"number",i)},expression:"edit.number"}})],1),t._v(" "),e("div",{staticClass:"vui-margin-top"},["1"===t.edit.advertiseType?e("div",[e("span",{staticClass:"vui-color--danger"},[t._v("提示：可出售额度")]),t._v(" "),e("span",{staticClass:"vui-color--primary"},[t._v("\n                  "+t._s(t.edit.base.leftSellLimit)+"\n                ")]),t._v(" "),t._e()]):e("div",[e("span",{staticClass:"vui-color--danger"},[t._v("提示：可购买额度")]),t._v(" "),e("span",{staticClass:"vui-color--primary"},[t._v("\n                  "+t._s(t.edit.base.leftBuyLimit)+"\n                ")]),t._v(" "),t._e()])])])]),t._v(" "),t._e(),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center vui-margin-bottom--large"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--label"},[t._v("最大交易额")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("i-input",{attrs:{placeholder:"请输入您的最大交易额",autocomplete:"off"},model:{value:t.edit.maxLimit,callback:function(i){t.$set(t.edit,"maxLimit",i)},expression:"edit.maxLimit"}})],1)]),t._v(" "),e("div",{staticClass:"vui-row--flex vui-align-items--center"},[e("div",{staticClass:"vui-span--6 vui-text-align--right vui-padding-right--large"},[e("span",{staticClass:"vui-color--danger"},[t._v("*")]),e("span",{staticClass:"vui-color--label"},[t._v("资金密码")])]),t._v(" "),e("div",{staticClass:"vui-span--18"},[e("i-input",{attrs:{type:"password",placeholder:"请输入您的资金密码..."},model:{value:t.edit.password,callback:function(i){t.$set(t.edit,"password",i)},expression:"edit.password"}})],1)])])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("i-button",{attrs:{type:"default"},on:{click:function(i){t.edit.popup=!1}}},[t._v("取消")]),t._v(" "),e("i-button",{attrs:{type:"primary"},on:{click:t.sureSave}},[t._v("保存")])],1)]),t._v(" "),e("div",{staticClass:"my_ad_box"},[e("div",{staticClass:"add_ad vui-flex "},[t._m(0),t._v(" "),e("div",[e("Button",{attrs:{icon:"ios-add-circle",type:"primary"},on:{click:function(i){t.beforePublish("insert")}}},[t._v("\n          发布广告\n        ")]),t._v(" "),e("Button",{attrs:{icon:"ios-build",type:"success"},on:{click:t.banding}},[t._v("\n          账号设置\n        ")])],1)]),t._v(" "),t._e(),t._v(" "),e("div",{staticClass:"order-table"},[e("Table",{staticClass:"tables",attrs:{columns:t.tableColumnsAdv,data:t.tableAdv,"no-data-text":t.$t("common.nodata"),loading:t.loading,"disabled-hover":!0}}),t._v(" "),e("div",{staticStyle:{margin:"10px",overflow:"hidden"},attrs:{id:"pages"}},[e("div",{staticStyle:{float:"right"}},[t.totalPage>0?e("Page",{attrs:{pageSize:t.pageNumber,total:t.totalPage,current:t.currentPage},on:{"on-change":t.changePage}}):t._e()],1)])],1)],2)],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"vui-flex--1 vui-center"},[i("div",[i("div",{staticClass:"vui-color--danger vui-line-height--medium"},[this._v("\n            当广告最小交易额所购买数量加上手续费大于广告剩余数量，该广告自动下架\n          ")]),this._v(" "),i("div",{staticClass:"vui-color--danger vui-line-height--medium"},[this._v("\n            一种支付或收款方式分别最多可以上架一个在线出售和在线够买广告\n          ")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"vui-margin-bottom"},[i("div",{staticClass:"vui-font-weight--800 vui-color--danger  vui-line-height--medium"},[this._v("\n          温馨提示:\n        ")]),this._v(" "),i("div",{staticClass:"vui-color--danger vui-line-height--medium"},[this._v("\n          当广告最小交易额所购买数量加上手续费大于广告剩余数量，该广告自动下架\n        ")]),this._v(" "),i("div",{staticClass:"vui-color--danger vui-line-height--medium"},[this._v("\n          一种支付或收款方式分别最多可以上架一个在线出售和在线够买广告\n        ")])])}]};var n=e("VU/8")(a,l,!1,function(t){e("CGn2"),e("YZT6")},"data-v-c08a3d7a",null);i.default=n.exports}});