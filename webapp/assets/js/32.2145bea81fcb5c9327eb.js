webpackJsonp([32],{"t+nv":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={name:"",data:()=>({bind:{code:""},agency:{value:0},message:{},follower:[]}),props:{},computed:{},methods:{init(){this.getAgencyInfo()},getAgencyInfo(){this.$http.post(this.host+"/uc/agency/info").then(t=>{var i=t.body;if(0===i.code){this.message=i.data;let t=this.message.follower,a=[];for(let i=0;i<t.length;i++){let s=Object.assign({handler:0},t[i]);a.push(s)}this.follower=a}else this.$Message.error(i.message)})},bindAgencyInfo(){if(!this.bind.code)return this.$Message.error("请输入您推荐人的推荐码"),!1;this.$http.post(this.host+"/uc/agency/bind",{promotionCode:this.bind.code}).then(t=>{var i=t.body;0===i.code?(this.$Message.success(i.message),this.init()):this.$Message.error(i.message)})},updatePercentBefore(t){if(null==this.agency.value)return this.$Message.error("请输入0-100的数字作为分成比例"),!1;let i=Number(this.message.memberPercent||this.message.highPercent||1.7),a=Number(this.message.lowPercent||1.2),s=((i-a)*this.agency.value/100+a).toFixed(4),e=`你是否确定修改团队成员【${t.userName}】的分成比例为【${this.agency.value}%】？预计分成值为【${s}】。当日生效`;this.$Modal.confirm({title:"确认信息",content:e,onOk:()=>{this.updatePercent(t.memberId)}})},updatePercent(t){this.$http.post(this.host+"/uc/agency/updateAgencyPercent",{memberId:t,bonusPercent:this.agency.value}).then(t=>{var i=t.body;0===i.code?(this.$Message.success(i.message),this.init()):this.$Message.error(i.message)})},handlerFollower(t,i,a){"cancel"===t?this.follower[i].handler=0:"update"===t?(this.follower.forEach(t=>{t.handler=0}),this.follower[i].handler=1,this.agency.value=a.bonusPercent):"save"===t&&this.updatePercentBefore(a)}},mounted(){this.init()}},e={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"app-wrapper is-wrapper--right vi-padding--large"},[t._m(0),t._v(" "),t._e(),t._v(" "),a("div",[a("div",{staticClass:"app-border app-border-bottom"},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(2),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-padding-right--large"},[t.message.parentName?a("span",[t._v(t._s(t.message.parentName))]):a("div",[a("i-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入您推荐人的推荐码"},model:{value:t.bind.code,callback:function(i){t.$set(t.bind,"code",i)},expression:"bind.code"}}),t._v(" "),a("i-button",{staticClass:"vi-margin-left",attrs:{type:"primary"},on:{click:t.bindAgencyInfo}},[t._v("\n              绑定\n            ")]),t._v(" "),a("span",{staticClass:"vi-color--danger"},[t._v("\n              请绑定您的推荐人，获取推广红利\n            ")])],1)])])]),t._v(" "),a("div",{staticClass:"app-border app-border-bottom"},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(3),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-padding-right--large"},[a("span",[t._v(t._s(t.message.promotionCode||"--"))])])])]),t._v(" "),a("div",{staticClass:"app-border app-border-bottom"},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(4),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-padding-right--large"},[a("span",[t._v(t._s(t.message.memberPercent||"--")+"%")])])])]),t._v(" "),a("div",{staticClass:"app-border app-border-bottom"},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(5),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-padding-right--large"},[a("span",[t._v(t._s(t.message.myPlatCoin||0))])])])]),t._v(" "),a("div",{staticClass:"app-border app-border-bottom"},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(6),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-padding-right--large"},[a("span",[t._v(t._s(t.message.totalPlatCoin||0))])])])]),t._v(" "),a("div",{},[a("div",{staticClass:"vi-flex vi-padding ",staticStyle:{"line-height":"40px"}},[t._m(7),t._v(" "),a("div",{staticClass:"vi-flex--1 vi-padding-left--large vi-margin-right--large"},[t.follower.length>0?a("div",[a("div",{staticClass:"app-border app-border-bottom"},[a("Row",[a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("编号")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("昵称")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("余额")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("团队余额")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("今日收款")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("全部收款")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("分成值")])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",{staticClass:"vi-font-weight--bold"},[t._v("分成比例")])])])],1)],1),t._v(" "),t._l(t.follower,function(i,s){return a("div",{staticClass:"app-border app-border-bottom"},[a("Row",[a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.memberId))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.userName))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.myPlatCoin))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.myTeamPlatCoin))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.totayAmount||0))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.totalAmount||0))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[a("span",[t._v(t._s(i.agencyPercent||0))])])]),t._v(" "),a("i-col",{attrs:{span:"3"}},[a("div",{staticClass:"vi-padding"},[1===i.handler?a("div",[a("Input-number",{attrs:{max:100,min:0},model:{value:t.agency.value,callback:function(i){t.$set(t.agency,"value",i)},expression:"agency.value"}}),t._v(" "),a("span",[t._v("%")]),t._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:function(a){t.handlerFollower("save",s,i)}}},[t._v("\n                        保存\n                      ")]),t._v(" "),a("i-button",{attrs:{type:"error"},on:{click:function(a){t.handlerFollower("cancel",s,i)}}},[t._v("\n                        取消\n                      ")])],1):a("div",[a("span",{staticClass:"vi-margin-right"},[t._v("\n                        "+t._s(i.bonusPercent||0)+"%\n                      ")]),t._v(" "),a("i-button",{attrs:{type:"default"},on:{click:function(a){t.handlerFollower("update",s,i)}}},[t._v("\n                        修改\n                      ")])],1)])])],1)],1)})],2):a("div",[a("span",[t._v("--")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"vi-padding--large"},[i("div",{staticClass:"vi-flex vi-align-items--center"},[i("i",{staticClass:"app-tag is-tag--rect vi-margin-right--large"}),this._v(" "),i("span",{staticClass:"vi-font-size--small"},[this._v("推广")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"vi-center"},[i("div",[i("div",[i("span",[this._v("\n            是的山东快书来得快\n          ")])]),this._v(" "),i("div",[i("span",[this._v("\n            的实例多亏了斯柯达\n          ")])])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("我的推荐人")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("我的推荐码")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("我的分成值")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("我的余额")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("团队余额")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"app-border app-border-right app-border--dashed vi-padding-left--large vi-padding-right--large",staticStyle:{width:"160px"}},[i("span",[this._v("我的团队")])])}]},n=a("VU/8")(s,e,!1,null,null,null);i.default=n.exports}});