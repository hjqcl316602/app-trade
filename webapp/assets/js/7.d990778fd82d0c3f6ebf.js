webpackJsonp([7],{DttI:function(e,t){},IAdP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("ieju");let n=s("PL6L").a.find(e=>"mobile"===e.type).value;var i={components:{},data(){return{GCCMatchAmount:0,matchAmount:0,modal:!1,loginmsg:this.$t("common.logintip"),loading:!0,ordKeyword:"",tableMoney:[],canMatch:!0,modal_msg:!1,match_msg:"",popup:{transfer:!1,account:!1},transfer:{number:0,mobile:"",realName:"",jsPassword:"",coinType:"",loading:!1,accountList:[]}}},methods:{initialize(){this.getMoney(),this.transferHis()},selectAccount(e){this.transfer.mobile=e.mobilePhone,this.transfer.realName=e.realName,this.popup.account=!1},transferHis(){this.$http.post(this.host+"/otc/transfer/transferHis").then(e=>{let t=e.data;0===t.code?this.transfer.accountList=t.data:this.$Message.error(t.message)})},transferMoney(){let e=new a.a;if(this.transfer.loading)return this.$Message.error("正在转账中...");e.set(this.transfer.coinType,!0,"请选择币种").set(this.transfer.number.toString(),!0,"请输入转账数量").check("转账数量有误，数量必须大于0，并且不能大于当前选择币种的最大数量",e=>e>0&&e<=this.selectedCoin.balance).set(this.transfer.mobile,!0,"请输入对方的手机号码").check("手机号码格式有误",e=>n.test(e)).set(this.transfer.realName,!0,"请输入对方的真实姓名").set(this.transfer.jsPassword,!0,"请输入您的交易密码"),e.pass?(this.transfer.loading=!0,this.$http.post(this.host+"/otc/transfer/transferToUser",{unit:this.transfer.coinType,mobile:this.transfer.mobile,realName:this.transfer.realName,number:this.transfer.number,jyPassword:this.transfer.jsPassword}).then(e=>{this.transfer.loading=!1;let t=e.data;0===t.code?(this.$Message.success("转账成功"),this.popup.transfer=!1,this.transfer.jsPassword="",this.transfer.realName="",this.transfer.mobile="",this.transfer.coinType="",this.transfer.number=0,this.initialize()):this.$Message.error(t.message)})):(this.transfer.loading=!1,this.$Message.error(e.message))},getMoney(){this.$http.post(this.host+"/uc/asset/wallet").then(e=>{var t=e.body;if(0==t.code){this.tableMoney=t.data;for(let e=0;e<this.tableMoney.length;e++)this.tableMoney[e].coinType=this.tableMoney[e].coin.unit;this.loading=!1}else this.$Message.error(this.loginmsg)})},getGCCMatchAmount(){this.$http.post(this.host+"/uc/asset/wallet/match-check").then(e=>{var t=e.body;0==t.code?(this.canMatch=!0,this.GCCMatchAmount=t.data):(this.canMatch=!1,this.match_msg=t.message),this.showMatchDailog()})},showMatchDailog(){this.canMatch?this.modal=!0:this.modal_msg=!0},matchGCC(){if(this.matchAmount<=0)this.$Message.warning(this.$t("uc.finance.money.matcherr1"));else if(this.matchAmount>this.GCCMatchAmount)this.$Message.warning(this.$t("uc.finance.money.matcherr2"));else{let e={};e.amount=this.matchAmount,this.$http.post(this.host+"/uc/asset/wallet/match",e).then(e=>{var t=e.body;0==t.code?(this.$Message.success(this.$t("uc.finance.money.matchsuccess")),this.GCCMatchAmount=this.GCCMatchAmount-this.matchAmount):this.$Message.error(t.message)})}},resetAddress(e){let t={};t.unit=e,this.$http.post(this.host+"/uc/asset/wallet/reset-address",t).then(e=>{var t=e.body;0==t.code?(this.$Message.success(this.$t("uc.finance.money.resetsuccess")),setTimeout(function(){window.location.reload()},3e3)):this.$Message.error(t.message)})}},created(){this.initialize()},computed:{selectedCoin(){return this.tableMoney.find(e=>e.coinType===this.transfer.coinType)},tableColumnsMoney(){let e=this,t=[];return t.push({title:this.$t("uc.finance.money.cointype"),key:"coinType",width:100,align:"center"}),t.push({title:this.$t("uc.finance.money.balance"),key:"balance",align:"center",render:(t,s)=>t("span",{attrs:{title:s.row.balance}},e.toFloor(s.row.balance||"0"))}),t.push({title:this.$t("uc.finance.money.frozen"),key:"frozenBalance",align:"center",render:(t,s)=>t("span",{attrs:{title:s.row.frozenBalance}},e.toFloor(s.row.frozenBalance||"0"))}),t.push({title:this.$t("uc.finance.money.needreleased"),align:"center",render:(t,s)=>t("span",{attrs:{title:s.row.toReleased}},e.toFloor(s.row.toReleased||"0"))}),t.push({title:this.$t("uc.finance.money.operate"),key:"price1",align:"center",render:function(t,s){var a=[];return 1==s.row.coin.canRecharge&&(null!=s.row.address&&""!=s.row.address?a.push(t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$router.push("/uc/recharge?name="+s.row.coin.unit)}},style:{marginRight:"8px"}},e.$t("uc.finance.money.charge"))):a.push(t("Button",{props:{type:"info",size:"small"},on:{click:function(){e.resetAddress(s.row.coin.unit)}},style:{marginRight:"8px"}},e.$t("uc.finance.money.getaddress")))),1==s.row.coin.canWithdraw&&a.push(t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.$router.push("/uc/withdraw?name="+s.row.coin.unit)}},style:{marginRight:"8px"}},e.$t("uc.finance.money.pickup"))),"GCC"==s.row.coin.unit.toUpperCase()&&a.push(t("Button",{props:{type:"success",size:"small"},on:{click:function(){e.getGCCMatchAmount()}},style:{marginRight:"8px"}},e.$t("uc.finance.money.match"))),a.push(t("Button",{props:{type:"info",size:"small"},on:{click:()=>{e.popup.transfer=!0}},style:{marginRight:"8px"}},"转账")),t("p",a)}}),t}},watch:{"transfer.coinType"(){this.transfer.number=0}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-rights"},[s("Modal",{staticClass:"ivu-modal--left",attrs:{title:"转账","mask-closable":!1,width:"400px"},model:{value:e.popup.transfer,callback:function(t){e.$set(e.popup,"transfer",t)},expression:"popup.transfer"}},[s("div",[s("div",{directives:[{name:"flex",rawName:"v-flex"},{name:"css",rawName:"v-css",value:{marginBottom:"large"},expression:"{ marginBottom: 'large' }"}]},[s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:6},expression:"{ span: 6 }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{lineHeight:"32px",textAlign:"right",paddingRight:"large"},expression:"{\n              lineHeight: '32px',\n              textAlign: 'right',\n              paddingRight: 'large'\n            }"}]},[e._v("\n            币种：\n          ")])]),e._v(" "),s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:18},expression:"{ span: 18 }"}]},[s("div",[s("i-select",{model:{value:e.transfer.coinType,callback:function(t){e.$set(e.transfer,"coinType",t)},expression:"transfer.coinType"}},e._l(e.tableMoney,function(t,a){return s("i-option",{key:a,attrs:{value:t.coinType}},[e._v(e._s(t.coinType))])}))],1)])]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex"},{name:"css",rawName:"v-css",value:{marginBottom:"large"},expression:"{ marginBottom: 'large' }"}]},[s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:6},expression:"{ span: 6 }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{lineHeight:"32px",textAlign:"right",paddingRight:"large"},expression:"{\n              lineHeight: '32px',\n              textAlign: 'right',\n              paddingRight: 'large'\n            }"}]},[e._v("\n            数量：\n          ")])]),e._v(" "),s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:18},expression:"{ span: 18 }"}]},[s("div",[s("InputNumber",{staticClass:"background-color---transparent",staticStyle:{width:"100%"},attrs:{placeholder:"请您输入转账数量",size:"large",min:0,max:e.selectedCoin&&e.selectedCoin.balance,disabled:!e.selectedCoin},model:{value:e.transfer.number,callback:function(t){e.$set(e.transfer,"number",t)},expression:"transfer.number"}})],1),e._v(" "),e.selectedCoin?s("div",{directives:[{name:"css",rawName:"v-css",value:{marginTop:"10px"},expression:"{ marginTop: '10px' }"}],staticClass:"vui-color--danger"},[e._v("\n            提示：最多转账数量\n            "),s("span",{directives:[{name:"css",rawName:"v-css",value:{color:"primary"},expression:"{ color: 'primary' }"}]},[e._v(e._s(e.selectedCoin.balance+" "))]),e._v("\n            "+e._s(e.selectedCoin.coinType)+"\n          ")]):e._e()])]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex"},{name:"css",rawName:"v-css",value:{marginBottom:"large"},expression:"{ marginBottom: 'large' }"}]},[s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:6},expression:"{ span: 6 }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{lineHeight:"32px",textAlign:"right",paddingRight:"large"},expression:"{\n              lineHeight: '32px',\n              textAlign: 'right',\n              paddingRight: 'large'\n            }"}]},[e._v("\n            手机号：\n          ")])]),e._v(" "),s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:18},expression:"{ span: 18 }"}]},[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{alignItems:"center"},expression:"{ alignItems: 'center' }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{flex:1},expression:"{ flex: 1 }"}]},[s("i-input",{attrs:{type:"text",placeholder:"请输入对方的手机号码"},model:{value:e.transfer.mobile,callback:function(t){e.$set(e.transfer,"mobile",t)},expression:"transfer.mobile"}})],1),e._v(" "),e.transfer.accountList.length>0?s("div",{directives:[{name:"css",rawName:"v-css",value:{width:"60px",textAlign:"right",cursor:"pointer",color:"primary"},expression:"{\n                width: '60px',\n                textAlign: 'right',\n                cursor: 'pointer',\n                color: 'primary'\n              }"}],on:{click:function(t){e.popup.account=!e.popup.account}}},[e._v("\n              账号簿\n            ")]):e._e()]),e._v(" "),e.popup.account?s("div",{directives:[{name:"css",rawName:"v-css",value:{marginTop:"10px",maxHeight:"150px",overflow:"auto"},expression:"{\n              marginTop: '10px',\n              maxHeight: '150px',\n              overflow: 'auto'\n            }"}]},e._l(e.transfer.accountList,function(t,a){return s("div",{directives:[{name:"css",rawName:"v-css",value:{padding:"10px",textAlign:"right",cursor:"pointer"},expression:"{\n                padding: '10px',\n                textAlign: 'right',\n                cursor: 'pointer'\n              }"}],key:a,on:{click:function(s){e.selectAccount(t)}}},[s("span",{directives:[{name:"css",rawName:"v-css",value:{marginRight:"10px"},expression:"{ marginRight: '10px' }"}]},[e._v(e._s(t.mobilePhone))]),e._v(" "),s("span",[e._v(e._s(t.realName))])])})):e._e()])]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex"},{name:"css",rawName:"v-css",value:{marginBottom:"large"},expression:"{ marginBottom: 'large' }"}]},[s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:6},expression:"{ span: 6 }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{lineHeight:"32px",textAlign:"right",paddingRight:"large"},expression:"{\n              lineHeight: '32px',\n              textAlign: 'right',\n              paddingRight: 'large'\n            }"}]},[e._v("\n            真实姓名：\n          ")])]),e._v(" "),s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:18},expression:"{ span: 18 }"}]},[s("i-input",{attrs:{type:"text",placeholder:"请输入对方的真实姓名"},model:{value:e.transfer.realName,callback:function(t){e.$set(e.transfer,"realName",t)},expression:"transfer.realName"}}),e._v(" "),s("div",{directives:[{name:"css",rawName:"v-css",value:{marginTop:"10px"},expression:"{ marginTop: '10px' }"}],staticClass:"vui-color--danger"},[e._v("\n            提示：对方账号必须实名认证，否则转账失败\n          ")])],1)]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex"},{name:"css",rawName:"v-css",value:{marginBottom:"large"},expression:"{ marginBottom: 'large' }"}]},[s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:6},expression:"{ span: 6 }"}]},[s("div",{directives:[{name:"css",rawName:"v-css",value:{lineHeight:"32px",textAlign:"right",paddingRight:"large"},expression:"{\n              lineHeight: '32px',\n              textAlign: 'right',\n              paddingRight: 'large'\n            }"}]},[e._v("\n            资金密码：\n          ")])]),e._v(" "),s("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{span:18},expression:"{ span: 18 }"}]},[s("i-input",{attrs:{type:"password",placeholder:"请输入您的资金密码..."},model:{value:e.transfer.jsPassword,callback:function(t){e.$set(e.transfer,"jsPassword",t)},expression:"transfer.jsPassword"}})],1)])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("i-button",{attrs:{type:"default"},on:{click:function(t){e.popup.transfer=!1}}},[e._v("取消")]),e._v(" "),s("i-button",{attrs:{type:"primary",disabled:e.transfer.loading},on:{click:e.transferMoney}},[e._v("保存")])],1)]),e._v(" "),s("div",{staticClass:"nav-right col-xs-12 col-md-10 padding-right-clear"},[s("div",{staticClass:"bill_box rightarea padding-right-clear"},[s("div",{staticClass:"shaow"},[s("div",{staticClass:"money_table"},[s("Table",{attrs:{columns:e.tableColumnsMoney,data:e.tableMoney,loading:e.loading,"disabled-hover":!0}})],1)])])]),e._v(" "),s("Modal",{attrs:{title:e.$t("uc.finance.money.match"),"mask-closable":!1},on:{"on-ok":e.matchGCC},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[s("P",{staticStyle:{"font-weight":"bold",padding:"10px 0"}},[e._v(e._s(e.$t("uc.finance.money.matchtip1"))+"："+e._s(e.GCCMatchAmount))]),e._v(" "),s("p",[s("span",[e._v(e._s(e.$t("uc.finance.money.matchtip2"))+"：")]),e._v(" "),s("InputNumber",{staticStyle:{width:"150px"},attrs:{type:"text",placeholder:e.$t("uc.finance.money.matchtip2")},model:{value:e.matchAmount,callback:function(t){e.matchAmount=t},expression:"matchAmount"}})],1)],1),e._v(" "),s("Modal",{attrs:{title:e.$t("uc.finance.money.match"),"mask-closable":!1},model:{value:e.modal_msg,callback:function(t){e.modal_msg=t},expression:"modal_msg"}},[s("p",[e._v(e._s(e.match_msg))])])],1)},staticRenderFns:[]};var o=s("VU/8")(i,r,!1,function(e){s("DttI"),s("OBJz"),s("VDdO")},"data-v-ddd96780",null);t.default=o.exports},OBJz:function(e,t){},PL6L:function(e,t,s){"use strict";s.d(t,"a",function(){return a});const a=[{type:"mobile",value:/(^[1][0-9]{10}$)|(^[0]{3}[0-9]{8}$)/}]},VDdO:function(e,t){}});