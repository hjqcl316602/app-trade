<script>
import { upload } from "../config/index";
export default {
  name: "vui-upload",
  data() {
    return {};
  },
  props: {
    layerSize: {
      type: Number,
      default: upload.layerSize
    },
    accept: {
      type: String,
      default: upload.accept
    },
    isRepeat: {
      type: Boolean,
      default: upload.isRepeat
    }
  },
  computed: {
    uploadStyle() {
      let style = {};
      style["width"] = this.layerSize + "px";
      style["height"] = this.layerSize + "px";
      return style;
    }
  },
  methods: {
    changUpload(e) {
      let file = e.target.files[0];
      let formData = new FormData();
      formData.append("file", file);
      this.isRepeat &&
        this.$refs["input-file"] &&
        (this.$refs["input-file"].value = "");
      this.$emit("change", formData);
    }
  }
};
</script>

<template>
  <div class="vui-upload">
    <label for="input-file" class="vui-upload__label">
      <input
        type="file"
        id="input-file"
        @change="changUpload"
        ref="input-file"
        :accept="accept"
      />
      <slot>
        <div class="vui-upload__inner" :style="uploadStyle">
          <svg
            t="1555316754664"
            class="icon"
            style=""
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="4860"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            width="100%"
            height="100%"
            fill="#555"
          >
            <path
              d="M158.2 158.5h707.6c20.3 0 36.6 16.3 36.6 36.6v288.7c-36.6-28.5-105.7-73.2-158.6-73.2-77.3 0-146.4 178.9-231.8 178.9-65.1-4.1-154.5-77.3-256.2-65.1-40.7 8.1-97.6 73.2-134.2 122V195.1c0-20.4 16.3-36.6 36.6-36.6zM329 451.3c-32.5 0-61-12.2-81.3-32.5s-32.5-52.9-32.5-81.3c0-28.5 12.2-61 32.5-81.3 20.3-20.3 48.8-32.5 81.3-32.5 28.5 0 56.9 12.2 81.3 32.5 20.3 20.3 32.5 52.9 32.5 81.3 0 28.5-12.2 61-32.5 81.3-24.4 20.3-52.8 32.5-81.3 32.5z m557.1-345.7H137.9c-40.7 0-73.2 32.5-73.2 73.2v666.9c0 40.7 32.5 73.2 73.2 73.2h748.3c40.7 0 73.2-32.5 73.2-73.2V178.8c-0.1-40.7-32.6-73.2-73.3-73.2z m0 0"
              p-id="4861"
            ></path>
          </svg>
        </div>
      </slot>
    </label>
  </div>
</template>

<style   scoped>
</style>